{"version":3,"file":"static/js/242.02c8ead9.chunk.js","mappings":"+PAsJA,UAzImB,WACf,IAAOA,GAAWC,EAAAA,EAAAA,MAAXD,QACDE,GAAeC,EAAAA,EAAAA,MACdC,GAAYC,EAAAA,EAAAA,MAAZD,SACP,GAAqBE,EAAAA,EAAAA,WAAU,GAAE,eAA1BC,EAAG,KAACC,EAAM,KACjB,GAA4DC,EAAAA,EAAAA,MAArDC,EAAc,EAAdA,eAAeC,EAAgB,EAAhBA,iBAAiBC,EAAiB,EAAjBA,kBACvC,GAA8BN,EAAAA,EAAAA,eAA6BO,GAAU,eAA9DC,EAAO,KAAEC,EAAU,KACpBC,EAAQ,yCAAG,WAAOC,GAAgB,sEACf,OAArBF,EAAWE,GAAU,SACff,GAASgB,EAAAA,EAAAA,IAAqB,EAAE,EAAElB,EAAkBiB,IAAW,KAAD,sCACvE,gBAHa,uCAIdE,EAAAA,EAAAA,YAAU,WACNjB,GAASkB,EAAAA,EAAAA,IAA4BpB,GACzC,GAAE,IACF,IAiCMqB,EAAe,CACjB,CACIC,MAAM,eACNC,UAAU,QACVC,MAAM,UAEV,CACIF,MAAM,2BACNC,UAAU,WACVC,MAAM,UAEV,CACIF,MAAM,2BACNC,UAAU,iBACVC,MAAM,UAEV,CACIF,MAAM,iCACNC,UAAU,kBACVC,MAAM,UAEV,CACIF,MAAM,qBACNC,UAAU,SACVC,MAAM,UAEV,CACIF,MAAM,2BACNC,UAAU,QACVC,MAAM,WAGd,OACI,UAAC,IAAK,CAACC,MAAO,CAACC,MAAM,QAASC,UAAW,WAAW,WAChD,SAAC,IAAU,CACPC,YAAU,EACVH,MAAO,CAAEC,MAAO,QAChBG,MAAOf,EACPgB,cAAe,CAAEC,UAAW,IAAKC,SAAU,QAC3CC,YAAY,iCACZC,YAAU,EACVC,eAAgB,SAACC,EAAWC,GAExB,OADAC,QAAQC,IAAIH,EAAWC,GAChBA,EAASf,MAAMkB,SAASJ,EACnC,EACApB,SAAUA,EACVyB,SAAU/B,KAEd,SAAC,IAAK,CACFgC,OAAQ,WACRC,UAAU,EACVC,QApFS,CACjB,CACItB,MAAM,eACNC,UAAU,GACVC,MAAM,SACNqB,OAAM,SAACC,EAAQC,EAAWC,GACtB,OAAOA,EAAM,CACjB,GAEJ,CACI1B,MAAM,2BACNC,UAAU,WACVC,MAAM,UAEV,CACIF,MAAM,2BACNC,UAAU,GACVC,MAAM,SACNqB,OAAM,SAACC,EAAQC,EAAWC,GACtB,OAAOF,EAAIG,SAAS,IAAKH,EAAII,UAAU,GAC3C,GAEJ,CACI5B,MAAM,2BACNC,UAAU,iBACVC,MAAM,UAEV,CACIF,MAAM,iCACNC,UAAU,kBACVC,MAAM,WAuDF2B,WAAYxC,EACZyC,YAAU,kBACHhD,GAAQ,IACXY,SAAQ,SAACa,GACL3B,GAASgB,EAAAA,EAAAA,IAAqBW,EAAM,EAAE7B,EAAkBc,GAC5D,IAEJuC,WAAY,CACRC,gBAAgB,CAAC/C,GACjBgD,SAAQ,SAACC,EAAiBT,GACnBS,GACChD,EAAOuC,EAAOE,UACd/C,GAASuD,EAAAA,EAAAA,IAAyBzD,EAAkBc,EAAkBiC,EAAOE,YAE7EzC,GAAQ,EAGhB,EACAkD,kBAAiB,WACb,OACI,SAAC,IAAI,WACD,SAAC,IAAK,CACFhB,OAAQ,KACRC,UAAU,EACVS,YAAY,EACZD,WAAYvC,EACZgC,QAASvB,KAIzB,OAMpB,C","sources":["pages/Hospital/Department/index.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\nimport {Space, Table, TreeSelect,Card} from \"antd\";\r\nimport {\r\n    getDepartmentByHoscodeAsync,\r\n    getFindScheduleListAsync,\r\n    getScheduleRuleAsync,\r\n    useDepartmentSelector\r\n} from \"@/store/slices/department\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {usePageInfo} from \"@/store/slices/common\";\r\n\r\n\r\nconst Department = () => {\r\n    const {hoscode} = useParams();\r\n    const dispatch:any = useDispatch();\r\n    const {pageInfo} = usePageInfo();\r\n    const [key,setKey] = useState(-1);\r\n    const {departmentList,scheduleRuleList,scheduleDetaiList} = useDepartmentSelector();\r\n    const [depcode, setDepcode] = useState<string | undefined>(undefined);\r\n    const onChange = async (newValue: string) => {\r\n        setDepcode(newValue);\r\n        await dispatch(getScheduleRuleAsync(1,5,hoscode as string,newValue));\r\n    };\r\n    useEffect(()=>{\r\n        dispatch(getDepartmentByHoscodeAsync(hoscode as string));\r\n    },[]);\r\n    const columns1:any = [\r\n        {\r\n            title:\"序号\",\r\n            dataIndex:\"\",\r\n            align:\"center\",\r\n            render(row:any,record:any,index:any){\r\n                return index+1\r\n            }\r\n        },\r\n        {\r\n            title:\"医师数量\",\r\n            dataIndex:\"docCount\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"号源时间\",\r\n            dataIndex:\"\",\r\n            align:\"center\",\r\n            render(row:any,record:any,index:any){\r\n                return(row.workDate+\"(\"+ row.dayOfWeek+\")\")\r\n            }\r\n        },\r\n        {\r\n            title:\"预约总数\",\r\n            dataIndex:\"reservedNumber\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"剩余预约数\",\r\n            dataIndex:\"availableNumber\",\r\n            align:\"center\",\r\n        }\r\n    ];\r\n    const columns2:any = [\r\n        {\r\n            title:\"职称\",\r\n            dataIndex:\"title\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"号源时间\",\r\n            dataIndex:\"workDate\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"预约总数\",\r\n            dataIndex:\"reservedNumber\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"剩余预约数\",\r\n            dataIndex:\"availableNumber\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"挂号费\",\r\n            dataIndex:\"amount\",\r\n            align:\"center\",\r\n        },\r\n        {\r\n            title:\"擅长技能\",\r\n            dataIndex:\"skill\",\r\n            align:\"center\",\r\n        }\r\n    ];\r\n    return (\r\n        <Space style={{width:\"100%\"}} direction={\"vertical\"}>\r\n            <TreeSelect\r\n                showSearch\r\n                style={{ width: '100%' }}\r\n                value={depcode}\r\n                dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n                placeholder=\"请选择科室\"\r\n                allowClear\r\n                filterTreeNode={(inputValue,treeNode:any)=>{\r\n                    console.log(inputValue,treeNode);\r\n                    return treeNode.title.includes(inputValue);\r\n                }}\r\n                onChange={onChange}\r\n                treeData={departmentList}\r\n            />\r\n            <Table\r\n                rowKey={\"workDate\"}\r\n                bordered={true}\r\n                columns={columns1}\r\n                dataSource={scheduleRuleList}\r\n                pagination={{\r\n                    ...pageInfo,\r\n                    onChange(value){\r\n                        dispatch(getScheduleRuleAsync(value,5,hoscode as string,depcode as string))\r\n                    }\r\n                }}\r\n                expandable={{\r\n                    expandedRowKeys:[key],\r\n                    onExpand(expanded:boolean,record:any){\r\n                        if(expanded){\r\n                            setKey(record.workDate);\r\n                            dispatch(getFindScheduleListAsync(hoscode as string,depcode as string,record.workDate))\r\n                        }else{\r\n                            setKey(-1);\r\n                        }\r\n\r\n                    },\r\n                    expandedRowRender(){\r\n                        return(\r\n                            <Card>\r\n                                <Table\r\n                                    rowKey={\"id\"}\r\n                                    bordered={true}\r\n                                    pagination={false}\r\n                                    dataSource={scheduleDetaiList}\r\n                                    columns={columns2}\r\n                                />\r\n                            </Card>\r\n                        )\r\n                    }\r\n                }}\r\n            />\r\n        </Space>\r\n\r\n    );\r\n};\r\n\r\nexport default Department;"],"names":["hoscode","useParams","dispatch","useDispatch","pageInfo","usePageInfo","useState","key","setKey","useDepartmentSelector","departmentList","scheduleRuleList","scheduleDetaiList","undefined","depcode","setDepcode","onChange","newValue","getScheduleRuleAsync","useEffect","getDepartmentByHoscodeAsync","columns2","title","dataIndex","align","style","width","direction","showSearch","value","dropdownStyle","maxHeight","overflow","placeholder","allowClear","filterTreeNode","inputValue","treeNode","console","log","includes","treeData","rowKey","bordered","columns","render","row","record","index","workDate","dayOfWeek","dataSource","pagination","expandable","expandedRowKeys","onExpand","expanded","getFindScheduleListAsync","expandedRowRender"],"sourceRoot":""}